#Linuxの常識

##CHAPTER1-Linuxの基礎知識

###1-1 サーバーとは

ネットワーク上で他のコンピューターに対してサービスを提供する側を**サーバー**、そのサーバーに対して処理を要求する側を**クライアント**と言います。

###1-2 OS とは

基本ソフトウェアのこと。OSの役割はハードウェアを制御し、応用ソフトウェアが動作するための基本的な機能を提供すること。一般的なOSとして

* Windows
* OS X
* Linux

があります。

###1-2 サーバーOSとは

Windowsでは**Windows Server 2008**や**Windows Server 2012**があります。
一般的なWindowsとの違い。

* たくさんのクライアントからアクセスさせるため数多くのネットワークアクセスに対応しスピーディーにサービスを提供できなかればならない

* しっかりしていること(堅牢性)

##CHAPTER1-2代表的なサーバーソフトウェア


* webサーバー

Webサイトを公開するためのサーバー

* メールサーバー

電子メールをやりとりするためのサーバー

* ファイルサーバー

ネットワーク上でファイルを共有できるようにするサーバーがファイルサーバー。

* DNSサーバー

ドメイン名からインターネット上で使われるアドレスであるIPアドレスに変換するサーバーがDNSサーバー

* FTPサーバー

ネットワーク経由でファイルを転送するためのサーバーがFTPサーバー

* データベースサーバー

データベースとデータベース管理システムを備え、Webサーバーなどにデータを提供するサーバーをデータベースサーバーといいます。

* プロキシ(代理)サーバー

クライアントの代理としてWebサーバーやFTPサーバーにアクセスするサーバーをプロキシサーバー

* アプリケーションサーバー

大規模なWebアプリケーションや業務システムを動かすには、Webサーバーだけでは不十分。そのためWebアプリケーションを実行するための基盤を提供するサーバーとしてアプリケーションサーバーが使われる

##1-3-Linuxとは

UNXというOSがあります。1960年代の終わりに開発が始まり、大学や研究機関を中心に広まる。Macで使われているOS Xも、UNIXの一種。

OSの中核部分をカーネルという。

Linuxを構成するソフトウェアカーネルやライブラリコマンド、サーバー・ソフトウェアなどは無償で利用することができる。

##1-4-Linuxの使いみち

必要な設定を行えばすぐにWebサーバーやメールサーバーとして利用できる。

サポートの切れたWindows XPパソコンにLinuxをインストールし再活用

##CHAPTER2-Linuxの基本操作

###2-1 コマンドを使った操作

Linuxは基本的にコマンドを使って操作をします。
ユーザーインターフェースは、大きくて２つあります。パソコンやスマートフォンで一般的なのが**GUI(Graphical User Interface)**でディスプレイやアイコンやウィンドが並びマウスを使ったり指でタッチしたりして操作する。GUIが普及する前は、文字だらけの画面を見いながら、キーボードからモイを入力して操作をするのが一般的だった。そのような方式を**CUI(Character User Interface)**という

    $ cd Documents
    $ ls
sample.text
  $nano sample.txt

*cd* *ls* *nano*といった単語がLinuxコマンドです、
ファイルを開いたりソフトウェアをインストールしたりといった操作もすべてコマンドで行う。

コマンド操作の基本的な流れ。
はじめにコマンドを入力する

    $ date

Enterキーを押す

    $ date (Enterキーを押す)

コマンドが実行され実行結果が表示される

    Sat Jun 21 22:11:49 JST 2014

###2-2 ファイルとディレクトリ

ディレクトリとは

Linuxでは、フォルダーのことをディレクトリという。

Linuxではディレクトリが入れ子状の断層構造担っている。
すべてのファイルやディレクトリは**ルートディレクトリ**というトップディレクトリに収められている。ルートディレクトリ以下にあるディレクトリはそれぞれ役割が決められている

* bin 

一般ユーザが実行できるコマンド

* boot

Linuxの起動に必要なファイル

* etc

システムの設定ファイルなど

* home 
　
一般ユーザーのホームディレクトリ

* lib

ライブラリーファイル

* proc

プロセス情報

* root

rootユーザーのホームディレクトリ

* sbin

管理者ユーザーが実行できるコマンド

* tmp

一時的なファイル置き場

* var

ログファイルなど



コマンドを使って作業しているユーザーは、必ずどこかのディレクトリに入って作業をします。ユーザーが今いるディレクトリのことを**カレントディレクトリ**と言います。

ユーザーがログインするとカレントディレクトリは**/home/ユーザー名/**となる

##CHAPTER3 Linux サーバー構築の基礎知識
###サーバーを公開する
サーバーの準備には、大きく分けて２通りの方法があります。

* 自前でサーバーを用意する

* レンタルサーバーを契約する

購入したばかりのサーバーには通常OSは入っていません。そこで新しくLinuxをインストールする。

サーバーの設定

サーバーを公開するまでには初期状態のサーバーに対してさまざまな設定を行うことになる。インストール作業中に設定できるものもあるが主な設定項目を紹介

* IPアドレスなどのネットワーク設定 

* Webサーバーのインストールと動作設定

* ファイヤウォール機能の設定

* どんなログを記録するのかの設定

標準設定でもいいがインターネットに公開する場合は適切な設定が求められる。

###サーバーを用意する手段

* PCサーバー

見かけや性能がパソコンに近いサーバーを**PCサーバー**といいます。見た目はパソコンに近いが性能や信頼性、可用性を高めるために専用のパーツが使われている。

* レンタルサーバー

サーバーレンタルを行っている事業者と契約してサーバーを借りるのがレンタルサーバー。事業者がサーバーもネットワーク機器もネットワーク回線も用意し、利用者はそれを借り受ける形態を**ホスティング**という。

* レンタルサーバー(ハウジング)

サーバー等のハードウェアは自前で用意し、業者には設置場所とネットワーク回線を借り受ける形態を**ハウジング**といいます。

* VPS(Virtual Private Server)

専用サーバーがほしいけどコストが高くて手が出しづらい。けれども共有サーバーでは性能が心もとなく、できることが限られてしまう。そこで登場したのがVPS(Virtual Private Sever)です。

* クラウドサーバー

VPSをさらに進化させたとも言えるのがクラウドサーバー。利用したディスクの使用料、ネットワークのデータ転送量などによって時間単位で細かく課金される。これはユーザーのニーズが読めない場合に好都合。

##CHAPTER4-Linuxサーバー運用の基礎知識

###サーバー運用のポイント

サーバーの構築が完了したら、次は安定的にサービスを提供することが大切です。そのためには、サーバーの保守・運用が重要員なってきます。日々のサーバー運用には以下のような作業があります。

* リソース管理

メモリが不十分なら動作がとても重くなってしまう。サーバーの数を増やしたりする必要がでてきる

* リモート管理

問題があるたびにデーターセンターい出向くことは非効率、というより不可能。
そのためネットワーク経由でサーバーを管理できるようになっている

* バックアップ 

万が一データが失われたり壊れたりしたときのためにほぞんしておくのがバックアップです

* ソフトウェアのアップデート

サーバーにインストールされているソフトウェアは、常に最新状態にしておかなければなりません。

###ソフトウェアの管理

ソフトウェアは頻繁にバージョンアップします。古いバージョンを使い続けるのはリスクを伴います。

Linuxでは、ソフトウェアはパッケージという単位でインストールする。
大きく分けてRPM形式とDebian形式があります。
RPM方式とDebian方式では互換性がない。どちらのパッケージ形式を採用しているかによって、インストールの際にダウンロードするソフトウェアを間違えないようにしなければならない。

###現場で役立つLinuxサーバー管理の知識

システムに常駐して利用者や管理に対して情報を提供するプログラムをサービスといいます。通常は数十のサービスが動作しています。
CentOSの主なサービス

* crond

スケジュールの実行を管理するcronサービス

* httpd

Apache　Webサーバー

* named

MIND DNS サーバー

* postfix

Postfixメールサーバー

* rsyslog

ログを記録し保存するサービス

* sshd

SSHサーバー


毎朝四時にシステムをチェックするなど、定期的に繰り返したい処理があるとします。Linuxにはcronというスケジュール登録の仕組みがある。

##CHAPTER5-セキュリティの基礎知識

###Linuxにとっての危険

* 不正侵入

正規のユーザーではないのにシステムに勝手に潜りこむのが不正侵入です。

* Dos/DDos攻撃

ネットワーク経由で大量のデータを送りつけることで、本来の利用者が正常なサービスを受けられなくなるようにする攻撃をDos攻撃といいます。
何千ものコンピュータにウィルスをしかけ、目標を同時に攻撃するDDoS攻撃があります。

* トロイの木馬

インターネット上からダウンロードしたソフトウェアをインストールすると、中に潜ませていた悪意あるプログラムまで一緒にインストールされてしまうようにする手法を**トロイの木馬**といいます。


最新ではないソフトウェアは危険
インターネット上の攻撃者は、ソフトウェアの不具合が発見されると、すぐにその不具合を利用した攻撃を試みる。

###知っておきたいセキュリティ技術

* パーミッション

パーミッションにしたがって許可された操作しかできないようになっている。
誰もが読み書きできるパーミッションをディレクトリに設定したとしましょう。悪意のある第三者がそれにきづき不正なアップロードをしたり踏み台にされてしまったりするかもしれません。

* SSL/TLS

主にWebブラウザどWebサーバーとの通信を暗号化するために使われているのがSSL/TLSという仕組みです。

* ファイアーウォール

ネットワーク上を流れる情報はパケットという単位で分割されています。
システムに入ってくるパケットや出て行くパケットを調べ、条件によってパケットを遮断する仕組みがファイヤーウォール。

###サーバーに求められるセキュリティ

* 最新のソフトウェアを使う

* 不要なソフトを削除する

* ログインを制限する

* 開いてるポートを確認する


##CHAPTER6-実践的Linuxサーバー管理とトラブル対応

###管理者が知っておきたい基本操作

* サーバーの情報を確認する

* ユーザーを追加する

ずっとrootユーザで作業するのは危険ですからもし自分のユーザーアカウントがないのであれば作成しておきましょう。

* ユーザー情報を確認する

システムにどのようなユーザーが登録されているかを調べるには、ユーザー情報ファイル /etc/passwd を表示します。

* システムを自動的にアップデートする

CentOSでは、yum-cronパッケージをインストールすることによって、管理者がいちいちyu updateコマンドを実行しなくても、自動的にシステム全体をアップデートしてくれます。

###トラブルに対処する

* コマンドが実行できない

代表的な原因はスペルミスです

* パスワードを忘れた

パスワードを再設定しましょう

* rootユーザーのパスワードがわからない

sudoコマンドでrootユーザーの全コマンドが実行できるようであれば、rootユーザーになる。

* インターネットに繋がらない

ネットワークが有効になっているのか確認してみましょう


###viエディタを使ってみる

viエディタは30年以上前からUNIXで使われているテキストエディタです。
他の一般的なテキストエディタと違って独特の操作体系があるのです。慣れないうちは簡単な編集作業さえ四苦八苦したり思わぬ操作ミスでファイルが乱れてしまったりします。
その代わり慣れるととても快適に使える。

viコマンドvimコマンドを実行すると、viエディタが起動する

viエディタを終了するにはコマンドモードで「:q」と入力します。


文字・行を削除する

* x

カーソルの位置の文字を削除

* X

カーソルの左の文字を削除

* dd

カーソルのある行を削除


行をコピー・ペーストする

行をコピーするには「yy」コマンドを使います。

ペーストするには「p」コマンドを使います。


ファイルを保存する

ファイルの変更を保存するには、コマンドモードで「;」を押します。するとメッセージ行に文字列を入力できる状態になりますので、「w ファイル名」と入力してEnterキーを押します。


##本を読んでの感想
普通にわかりやすい本だなって思いました。僕も好きなことに対する本ならこれくらい書けると思ったんですが冷静に考えて無理でした。というのを踏まえると作者がどれほどLinuxが好きかわかっと同時にLinuxの重要性も伝えてくれました。素敵な本だと思います。
##つっこみどころ

僕みたいな頭の悪い人間にこの本を突っ込めと言われても突っ込まれ返されるだけなのでなんとも言えない気持ちなうなんですが、しいて言えば文字数が多いかなって思いました。もちろん理解してるというかある程度の知識を持った前提で話してるところがあったのでもっと図を入れて欲しかったです。作者さんはさぞかし頭がいい人だと思うのでもっと図を入れてわかりやすく書けるんじゃないかなと思いました。改めて図を多めにした**Linuxの常識**という本が出版された時は自腹で買います。

